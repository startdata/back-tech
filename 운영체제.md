# 운영체제의 역할과 구조

### 운영체제의 역할

- CPU 스케줄링과 프로세스 관리
  - CPU소유권을 어떤 프로세스에 할당할지, 프로세스의 생성과 삭제, 자원 할당 및 반환을 관리한다.
- 메모리 관리
  - 한정된 메모리를 어떤 프로세스에 얼만큼 할당해야 하는지 관리한다.
- 디스크 파일 관리
  - 디스크 파일을 어떠한 방법으로 보관할지 관리한다.
- I/O디바이스 관리
  - I/O 디바이스들인 마우스, 키보드와 컴퓨터 간에 데이터를 주고받는 것을 관리한다.

### 운영체제의 구조

- 유저 인터페이스
  - GUI: 그래픽 환경에서 작업할 수 있는 인터페이스
  - CLI: 텍스트 기반 인터페이스
- 시스템콜
  - 커널과 응용 프로그램 간의 인터페이스, 응용 프로그램이 운영체제의 기능을 사용하려면, 시스템 호출을 통해 커널에 요청 해야 한다.
  - 시스템 호출은 프로세스 간 통신, 파일 입출력, 메모리 할당 등의 기능을 제공한다.
- 커널
  - 하드웨어와 응용 프로그램 간의 인터페이스를 제공하며, 시스템 자원을 관리한다.(CPU, 메모리, 디스크, 네트워크)
  - 커널은 프로세스 관리, 메모리 관리, 파일 시스템 관리, 입출력(I/O) 관리 등의 기능을 제공한다.
- 드라이버
  - 드라이버는 하드웨어를 제어하기 위해 필요한 명령어와 데이터를 운영 체제와 하드웨어 간에 전달한다.

### 프로세스와 스레드

#### 프로세스

- 운영체제로부터 자원을 할당받아 실행되는 프로그램의 인스턴스
- 프로그램의 실행에 필요한 메모리, CPU 시간, 입출력 장치 등의 자원을 독립적으로 할당받아 사용
- 각 프로세스는 고유한 프로세스 ID(PID)를 가진다.
- 서로 다른 프로세스끼리는 메모리를 공유하지 않는다.
- 각각의 프로세스는 독립적으로 실행되며, 서로 영향을 주지 않는다.

#### 스레드

- 프로세스 내에서 실행되는 실행 단위
- 하나의 프로세스는 여러개의 스레드를 가질 수 있따.
- 스레드는 프로세스의 자원을 공유하여 사용한다.
  - 스레드는 프로세스의 메모리,파일,입출력 장치 등의 자원을 공유 한다.
  - 서로 다른 스레드 끼리는 스택은 공유하지 않는다.
- 이러한 특징으로 스레드는 프로세스보다 더 가볍고 빠르게 생성되며, 컨텍스트 스위칭이 빠르다
  > 하나의 프로세스에서 여러 개의 스레드를 사용하는 멀티 스레딩 프로그래밍을 사용하면, 프로그램의 성능을 향상시킬수 있다.
  > 그러나, 스레드를 사용할 때는 스레드 간의 동기화 문제, 데드락 등의 문제가 생길수 있다.

#### 동기화 문제

스레드 간의 동기화 문제는 여러 스레드가 동일한 자원에 접근하거나 수정하려고 할 때 발생한다.
이러한 상황에서는 스레드 간의 실행 순서나 결과가 일관성 없이 나올수 있다.

> 동일한 자원에 접근,수정 => 스레드간의 순서,결과에 대한 예측이 힘들어짐

동기화 문제

- 경쟁 상태
  - 여러 스레드가 동시에 같은 자원에 접근하려고 할때 발생, 동일한 변수를 여러 스레드에서 동시에 수정하면, 예상치 못한 결과가 발생
- 데드락
  - 두 개 이상의 스레드가 서로의 작업이 끝나기를 기다리는 상황, 더 이상 다른 작업을 처리할 수 없게 되어 프로그램이 정지된다.
- 스레드간의 우선순위 역전
  - 낮은 우선순위의 스레드가 높은 우선순위의 스레드에 의해 블록되어 작업을 수행할 수 없는 상황

해결법

- 상호배제
  - 여러 스레드가 동일한 자원을 동시에 수정하지 못하도록 하여 경쟁 상태를 방지
- 동기화
  - 스레드 간의 작업 순서나 결과를 일관성 있게 유지하기 위한 기법
- 데드락 방지
