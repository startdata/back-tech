# DI, IoC

## IoC

제어의 역전이라고 표현 하며, 메소드나 객체의 호출작업을 외부에서 결정해서 주입하는것
프로그램 흐름을 개발자가 아닌 사용자가 컨트롤한다.

spring, nestjs 등의 프레임워크 에서 코드를 제어
코드를 작성하는 사람이 제어하는 것이 아니라 프레임워크에서 제어해서 제어의 역전

개발자는 부품을 개발하고 부품들을 조립하는 방식으로 개발

- 코드흐름의 주체를 바꾸는것
- 오브젝트를 생성하는 것, 오브젝트의 생명주기를 관리하는 것, 메소드를 수행하는 것 등. 그리고 일반적인 프로그램은 이러한 행위를 하나부터 열까지 모두 스스로 수행한다.
- 소프트웨어 프레임워크, 콜백, 스케줄러, 이벤트 루프, 의존성 주입 및 템플릿 방법은 제어 원리의 반전을 따르는 설계 패턴의 예이다

상위 모듈이 손님, 하위 모듈이 택시 기사

예)

택시기사에게 자동차 속도를 몇 km로 유지할지 어떤 길로 갈지

**하나하나 지시** 해야한다면

`일반적인 제어 흐름`

상위 모듈이 하위 모듈에게 지시해야하므로 명령적 프로그래밍

제어 흐름의 역전을 시킨다면 손님은 목적지만 알고있고 택시 기사는 목적지 까지 손님을 안내한다.

손님이 택시 기사에게 명령 하던것을 택시 기사가 손님에게 도착함을 알리는 방식으로 제어가 역전

== 상위 모듈을 추상화 하위에서 구현체를 만드는 방법 (DIP)

제어의 역적을 적용하는 이유

1. 유지보수 비용을 줄일 수 있다.
2. 구현이 좀 더 단순해진다.

상위모듈에서 코드를 전부 정의한다면 하위 모듈에서 필요한 기능이 있을때 마다 상위 모듈을 수정해 주어야한다.

예) 영등포를 가는방법 강동을 가는 방법

- 모든 예외 상황에 대처하는 모습을 보여줘야함
- 함수의 변경이 잦게 만들고 유지보수 비용이 높아 진다.

---

## DI

부품의 조립
부품들을 따로 만들어서 가져와서 조립해서 쓰자(ex.레고)

### DI란?

의존성 주입
부품(객체)를 직접생성하거나 제어 하지 않고
특정 부품에 필요한 부품을 외부에서 결정해서 연결(조립)시키는 것
